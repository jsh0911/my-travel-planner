<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TRIP_PLANNER_PRO.EXE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @font-face {
            font-family: 'DungGeunMo';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_six@1.2/DungGeunMo.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }
        body {
            font-family: 'DungGeunMo', monospace;
            background-color: #008080;
        }
        .win-border {
            border-top: 2px solid white;
            border-left: 2px solid white;
            border-bottom: 2px solid #4a4a4a;
            border-right: 2px solid #4a4a4a;
        }
        .win-inset {
            border-top: 2px solid #4a4a4a;
            border-left: 2px solid #4a4a4a;
            border-bottom: 2px solid white;
            border-right: 2px solid white;
        }
        .win-btn-active {
            transform: translate(1px, 1px);
            box-shadow: none !important;
        }
        .tab-active {
            background-color: #c0c0c0 !important;
            border-bottom: none !important;
            font-weight: bold;
            z-index: 10;
        }
        .day-active {
            background-color: #000080 !important;
            color: white !important;
            padding-bottom: 8px !important;
        }
    </style>
</head>
<body class="p-4 md:p-10">
    <div id="app" class="max-w-2xl mx-auto bg-[#c0c0c0] win-border p-1 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]">
        <!-- Title Bar -->
        <div class="bg-gradient-to-r from-[#000080] to-[#1084d0] p-1 flex justify-between items-center mb-2">
            <div class="flex items-center gap-2 px-1">
                <i data-lucide="plane" class="w-4 h-4 text-white"></i>
                <span class="text-white font-bold text-xs md:text-sm">TRIP_PLANNER_PRO.EXE</span>
            </div>
            <div class="flex gap-1 pr-1">
                <button class="w-4 h-4 bg-[#c0c0c0] text-black border border-gray-400 flex items-center justify-center text-[10px]">_</button>
                <button class="w-4 h-4 bg-[#c0c0c0] text-black border border-gray-400 flex items-center justify-center text-[10px]">X</button>
            </div>
        </div>

        <!-- Main Navigation -->
        <div class="flex gap-1 px-2 mb-0">
            <button onclick="switchTab('schedule')" id="tab-schedule" class="px-3 md:px-5 py-1 text-sm border-t-2 border-l-2 border-r-2 border-gray-600 bg-[#a0a0a0] flex items-center gap-2">
                <i data-lucide="calendar" class="w-3 h-3"></i> ÏùºÏ†ï
            </button>
            <button onclick="switchTab('checklist')" id="tab-checklist" class="px-3 md:px-5 py-1 text-sm border-t-2 border-l-2 border-r-2 border-gray-600 bg-[#a0a0a0] flex items-center gap-2">
                <i data-lucide="check-square" class="w-3 h-3"></i> Ï≤¥ÌÅ¨Î¶¨Ïä§Ìä∏
            </button>
            <button onclick="switchTab('expense')" id="tab-expense" class="px-3 md:px-5 py-1 text-sm border-t-2 border-l-2 border-r-2 border-gray-600 bg-[#a0a0a0] flex items-center gap-2">
                <i data-lucide="wallet" class="w-3 h-3"></i> Í≤ΩÎπÑ
            </button>
        </div>

        <!-- Content Area -->
        <div class="bg-[#c0c0c0] win-border border-white p-4">
            <h1 class="text-xl font-black italic text-pink-600 mb-4 drop-shadow-[1px_1px_0px_rgba(0,255,255,1)] flex items-center gap-2">
                <i data-lucide="sparkles" class="w-5 h-5"></i>
                <span id="tab-title">2Î∞ï 3Ïùº Ïó¨Ìñâ ÏùºÏ†ï</span>
            </h1>

            <div id="content-container">
                <!-- Dynamic Content Injection -->
            </div>
        </div>

        <!-- Status Bar -->
        <div class="mt-2 border-t-2 border-gray-800 p-1 flex items-center justify-between text-[10px]">
            <div id="status-text" class="bg-gray-200 win-inset px-2 flex-1 overflow-hidden">
                System Status: READY
            </div>
            <div class="bg-gray-200 win-inset px-2 ml-1 italic flex items-center gap-1 shrink-0">
                <i data-lucide="music" class="w-2 h-2"></i> TRAVEL.MIDI
            </div>
        </div>
    </div>

    <script>
        // --- State ---
        let state = {
            activeTab: 'schedule',
            activeDay: 1,
            editingId: null,
            schedules: [
                { id: 1, day: 1, time: '10:00', text: 'Ïù∏Ï≤úÍ≥µÌï≠ ÎèÑÏ∞©' },
                { id: 2, day: 2, time: '09:00', text: 'Ìò∏ÌÖî Ï°∞Ïãù Î∞è Ï∂úÎ∞ú' },
                { id: 3, day: 3, time: '14:00', text: 'Í∏∞ÎÖêÌíà ÏáºÌïë' }
            ],
            checklist: [
                { id: 101, text: 'Ïó¨Í∂å Ï±ôÍ∏∞Í∏∞', completed: false }
            ],
            expenses: [
                { id: 201, item: 'ÎπÑÌñâÍ∏∞Ìëú', cost: 350000 }
            ]
        };

        // --- Functions ---
        function switchTab(tab) {
            state.activeTab = tab;
            state.editingId = null;
            render();
        }

        function switchDay(day) {
            state.activeDay = day;
            state.editingId = null;
            render();
        }

        // --- CRUD Logic ---
        function addItem(type, e) {
            e.preventDefault();
            const form = e.target;
            const now = Date.now();

            if (type === 'schedule') {
                const text = form.schedule.value;
                const time = form.time.value || '00:00';
                if (!text) return;
                state.schedules.push({ id: now, day: state.activeDay, time, text });
            } else if (type === 'checklist') {
                const text = form.checklist.value;
                if (!text) return;
                state.checklist.push({ id: now, text, completed: false });
            } else if (type === 'expense') {
                const item = form.expense.value;
                const cost = parseInt(form.cost.value);
                if (!item || isNaN(cost)) return;
                state.expenses.push({ id: now, item, cost });
            }
            render();
        }

        function deleteItem(type, id) {
            state[type] = state[type].filter(i => i.id !== id);
            render();
        }

        function toggleCheck(id) {
            const item = state.checklist.find(i => i.id === id);
            if (item) item.completed = !item.completed;
            render();
        }

        function startEdit(id) {
            state.editingId = id;
            render();
        }

        function cancelEdit() {
            state.editingId = null;
            render();
        }

        function saveEdit(type, id) {
            const row = document.querySelector(`[data-id="${id}"]`);
            if (type === 'schedule') {
                const item = state.schedules.find(i => i.id === id);
                item.time = row.querySelector('.edit-time').value;
                item.text = row.querySelector('.edit-text').value;
            } else if (type === 'checklist') {
                const item = state.checklist.find(i => i.id === id);
                item.text = row.querySelector('.edit-text').value;
            } else if (type === 'expense') {
                const item = state.expenses.find(i => i.id === id);
                item.item = row.querySelector('.edit-item').value;
                item.cost = parseInt(row.querySelector('.edit-cost').value);
            }
            state.editingId = null;
            render();
        }

        // --- Render Engine ---
        function render() {
            const container = document.getElementById('content-container');
            const title = document.getElementById('tab-title');
            const status = document.getElementById('status-text');

            // Update Tabs
            document.querySelectorAll('[id^="tab-"]').forEach(btn => btn.classList.remove('tab-active'));
            document.getElementById(`tab-${state.activeTab}`).classList.add('tab-active');

            if (state.activeTab === 'schedule') {
                title.innerText = '2Î∞ï 3Ïùº Ïó¨Ìñâ ÏùºÏ†ï';
                status.innerText = `System Status: DAY ${state.activeDay} EDITING...`;
                
                let dayButtons = [1, 2, 3].map(d => `
                    <button onclick="switchDay(${d})" class="px-4 py-1 text-xs border-t border-l border-r border-gray-600 rounded-t-lg transition-all ${state.activeDay === d ? 'day-active' : 'bg-[#b0b0b0]'}">
                        Day ${d} ${d === 1 ? 'üõ´' : d === 2 ? 'üì∏' : 'üè†'}
                    </button>
                `).join('');

                let listHtml = state.schedules
                    .filter(s => s.day === state.activeDay)
                    .sort((a, b) => a.time.localeCompare(b.time))
                    .map(item => {
                        if (state.editingId === item.id) {
                            return `
                                <div class="flex gap-1 w-full border-b border-dotted border-gray-400 py-1" data-id="${item.id}">
                                    <input type="time" class="edit-time border border-blue-500 text-xs w-20 p-1" value="${item.time}">
                                    <input type="text" class="edit-text border border-blue-500 text-xs flex-1 p-1" value="${item.text}">
                                    <button onclick="saveEdit('schedule', ${item.id})" class="text-green-600"><i data-lucide="save" class="w-4 h-4"></i></button>
                                    <button onclick="cancelEdit()" class="text-red-600"><i data-lucide="x" class="w-4 h-4"></i></button>
                                </div>`;
                        }
                        return `
                            <div class="flex items-center justify-between border-b border-dotted border-gray-400 pb-1 hover:bg-yellow-50 px-1">
                                <div class="flex gap-3 items-center">
                                    <span class="bg-blue-800 text-white px-1 text-[10px] font-bold shadow-sm">${item.time}</span>
                                    <span class="text-sm font-bold text-gray-800">${item.text}</span>
                                </div>
                                <div class="flex gap-2">
                                    <button onclick="startEdit(${item.id})" class="text-gray-400 hover:text-blue-600"><i data-lucide="edit-3" class="w-3 h-3"></i></button>
                                    <button onclick="deleteItem('schedules', ${item.id})" class="text-gray-400 hover:text-red-600"><i data-lucide="trash-2" class="w-3 h-3"></i></button>
                                </div>
                            </div>`;
                    }).join('');

                container.innerHTML = `
                    <div class="flex gap-1 mb-4 border-b-2 border-gray-500 pb-0">${dayButtons}</div>
                    <form onsubmit="addItem('schedule', event)" class="flex flex-wrap gap-2 mb-4 bg-white/30 p-2 border border-gray-500">
                        <input type="time" name="time" class="p-1 border-2 border-gray-800 text-sm">
                        <input type="text" name="schedule" placeholder="Ìï† Ïùº ÏûÖÎ†•" class="flex-1 p-1 border-2 border-gray-800 text-sm min-w-[120px]">
                        <button type="submit" class="bg-[#c0c0c0] win-border border-b-black border-r-black px-3 py-1 font-bold text-xs">Ï∂îÍ∞Ä</button>
                    </form>
                    <div class="space-y-2 bg-white p-3 border-2 border-gray-800 min-h-[300px] shadow-inner">
                        <p class="text-[10px] text-blue-600 font-bold mb-2">ÌòÑÏû¨ ÏÑ†ÌÉù: DAY ${state.activeDay} SCHEDULE</p>
                        ${listHtml || '<div class="text-center py-10 italic text-gray-400 text-xs">Í≥ÑÌöçÎêú ÏùºÏ†ïÏù¥ ÏóÜÏäµÎãàÎã§.</div>'}
                    </div>`;

            } else if (state.activeTab === 'checklist') {
                title.innerText = 'PACKING LIST';
                status.innerText = 'System Status: CHECKLIST MODE';

                let listHtml = state.checklist.map(item => {
                    if (state.editingId === item.id) {
                        return `
                            <div class="flex gap-1 w-full border-b border-gray-200 py-1" data-id="${item.id}">
                                <input type="text" class="edit-text border border-blue-500 text-xs flex-1 p-1" value="${item.text}">
                                <button onclick="saveEdit('checklist', ${item.id})" class="text-green-600"><i data-lucide="save" class="w-4 h-4"></i></button>
                            </div>`;
                    }
                    return `
                        <div class="flex items-center justify-between border-b border-gray-100 py-1">
                            <div class="flex items-center gap-2">
                                <button onclick="toggleCheck(${item.id})">
                                    ${item.completed ? '<i data-lucide="heart" class="w-4 h-4 text-pink-500 fill-pink-500"></i>' : '<div class="w-4 h-4 border border-black bg-gray-50"></div>'}
                                </button>
                                <span class="text-sm ${item.completed ? 'line-through text-gray-400 font-normal' : 'font-bold'}">${item.text}</span>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="startEdit(${item.id})" class="text-gray-300 hover:text-blue-500"><i data-lucide="edit-3" class="w-3 h-3"></i></button>
                                <button onclick="deleteItem('checklist', ${item.id})" class="text-gray-300 hover:text-red-500"><i data-lucide="trash-2" class="w-3 h-3"></i></button>
                            </div>
                        </div>`;
                }).join('');

                container.innerHTML = `
                    <form onsubmit="addItem('checklist', event)" class="flex gap-2 mb-6 bg-white/30 p-2 border border-gray-500">
                        <input type="text" name="checklist" placeholder="Ï±ôÍ∏∏ Î¨ºÍ±¥..." class="flex-1 p-1 border-2 border-gray-800 text-sm">
                        <button type="submit" class="bg-[#c0c0c0] win-border border-b-black border-r-black px-4 py-1 font-bold text-xs">Ï∂îÍ∞Ä</button>
                    </form>
                    <div class="space-y-2 bg-white p-3 border-2 border-gray-800 min-h-[300px]">${listHtml}</div>`;

            } else if (state.activeTab === 'expense') {
                title.innerText = 'BUDGET TRACKER';
                status.innerText = 'System Status: ACCOUNTING';

                let total = state.expenses.reduce((sum, i) => sum + i.cost, 0);
                let listHtml = state.expenses.map(item => {
                    if (state.editingId === item.id) {
                        return `
                            <div class="flex gap-1 w-full border-b border-gray-100 py-2" data-id="${item.id}">
                                <input type="text" class="edit-item border border-blue-500 text-xs flex-1 p-1" value="${item.item}">
                                <input type="number" class="edit-cost border border-blue-500 text-xs w-20 p-1" value="${item.cost}">
                                <button onclick="saveEdit('expense', ${item.id})" class="text-green-600"><i data-lucide="save" class="w-4 h-4"></i></button>
                            </div>`;
                    }
                    return `
                        <div class="flex items-center justify-between border-b border-gray-100 text-sm py-2">
                            <div class="flex flex-col">
                                <span class="font-bold text-gray-700">${item.item}</span>
                                <span class="text-[10px] text-gray-400">ID_${item.id.toString().slice(-4)}</span>
                            </div>
                            <div class="flex items-center gap-3">
                                <span class="text-blue-800 font-bold bg-blue-50 px-1">${item.cost.toLocaleString()}Ïõê</span>
                                <button onclick="startEdit(${item.id})"><i data-lucide="edit-3" class="w-3 h-3 text-gray-300 hover:text-blue-500"></i></button>
                                <button onclick="deleteItem('expenses', ${item.id})"><i data-lucide="trash-2" class="w-3 h-3 text-gray-300 hover:text-red-500"></i></button>
                            </div>
                        </div>`;
                }).join('');

                container.innerHTML = `
                    <form onsubmit="addItem('expense', event)" class="flex flex-wrap gap-2 mb-6 bg-white/30 p-2 border border-gray-500">
                        <input type="text" name="expense" placeholder="Ìï≠Î™©" class="flex-1 p-1 border-2 border-gray-800 text-sm min-w-[100px]">
                        <input type="number" name="cost" placeholder="Í∏àÏï°" class="w-24 p-1 border-2 border-gray-800 text-sm">
                        <button type="submit" class="bg-[#c0c0c0] win-border border-b-black border-r-black px-4 py-1 font-bold text-xs">Ï∂îÍ∞Ä</button>
                    </form>
                    <div class="bg-white border-2 border-gray-800 min-h-[300px] flex flex-col">
                        <div class="p-3 flex-1 overflow-y-auto">${listHtml}</div>
                        <div class="bg-yellow-100 p-2 border-t-2 border-gray-800 flex justify-between items-center">
                            <span class="text-xs font-bold text-gray-600 flex items-center gap-1"><i data-lucide="sparkles" class="w-3 h-3"></i> TOTAL_COST</span>
                            <span class="text-lg font-black text-red-600 underline decoration-double">${total.toLocaleString()}Ïõê</span>
                        </div>
                    </div>`;
            }

            lucide.createIcons();
        }

        // Initial Render
        window.onload = render;
    </script>
</body>
</html>
